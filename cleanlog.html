<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>سجل الصفقات</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    direction: rtl;
    margin: 20px;
    background: #f7f9fc;
    color: #2c3e50;
  }
  h2 {
    text-align: center;
    color: #4a90e2;
  }
  table {
    width: 100%;
    max-width: 800px;
    margin: 20px auto 0 auto;
    border-collapse: collapse;
    background: white;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 2px 7px rgba(0,0,0,0.15);
  }
  th, td {
    padding: 12px 15px;
    border-bottom: 1px solid #ddd;
    text-align: center;
    font-size: 14px;
  }
  th {
    background-color: #4a90e2;
    color: white;
  }
  tr:last-child td {
    border-bottom: none;
  }
  #clearBtn {
    display: block;
    margin: 20px auto 40px auto;
    padding: 12px 25px;
    font-size: 16px;
    background: #c0392b;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
  }
  #clearBtn:hover {
    background: #a83222;
  }
</style>
</head>
<body>

  <h2>📚 سجل الصفقات</h2>
  <button id="clearBtn" onclick="clearTrades()">مسح السجل</button>

  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>الزوج</th>
        <th>النوع</th>
        <th>دخول</th>
        <th>وقف</th>
        <th>هدف</th>
        <th>النتيجة</th>
        <th>التاريخ والوقت</th>
      </tr>
    </thead>
    <tbody id="tradesBody"></tbody>
  </table>

<script>
  function loadTrades() {
    const trades = JSON.parse(localStorage.getItem("trades") || "[]");
    const tbody = document.getElementById("tradesBody");
    tbody.innerHTML = "";
    trades.forEach((trade, i) => {
      const tr = document.createElement("tr");
      const date = new Date(trade.timestamp);
      tr.innerHTML = `
        <td>${i + 1}</td>
        <td>${trade.pair}</td>
        <td>${trade.type}</td>
        <td>${trade.entry}</td>
        <td>${trade.sl}</td>
        <td>${trade.tp}</td>
        <td>${trade.result === "جارية" ? "🔄 جارية" : trade.result === "ربح" ? "✅ ربح" : "❌ خسارة"}</td>
        <td>${date.toLocaleString('ar-EG')}</td>
      `;
      tbody.appendChild(tr);
    });
  }

  function clearTrades() {
    if(confirm("هل أنت متأكد من مسح سجل الصفقات؟ لا يمكن التراجع عن هذا الإجراء.")) {
      localStorage.removeItem("trades");
      loadTrades();
    }
  }

  window.onload = loadTrades;
</script>

</body>
</html>
